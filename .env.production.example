# ═══════════════════════════════════════════════════════════════════
# FruitPAK Production Environment Configuration
# ═══════════════════════════════════════════════════════════════════
#
# Copy this file to .env.production and update with your values
# Usage: docker compose -f docker-compose.prod.yml --env-file .env.production up
#
# ═══════════════════════════════════════════════════════════════════

# ── Environment ──────────────────────────────────────────────────
ENVIRONMENT=production

# ── Database (PostgreSQL + TimescaleDB) ──────────────────────────
# Local/Docker deployment:
POSTGRES_USER=fruitpak
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=fruitpak
POSTGRES_PORT=5432

# AWS RDS deployment (uncomment and update):
# DATABASE_URL=postgresql+asyncpg://user:password@fruitpak-db.abc123.us-east-1.rds.amazonaws.com:5432/fruitpak
# DATABASE_URL_SYNC=postgresql://user:password@fruitpak-db.abc123.us-east-1.rds.amazonaws.com:5432/fruitpak
# DATABASE_READ_URL=postgresql+asyncpg://user:password@fruitpak-db-ro.abc123.us-east-1.rds.amazonaws.com:5432/fruitpak

# ── Redis (Caching & Sessions) ────────────────────────────────────
# Local/Docker deployment:
REDIS_PORT=6379

# AWS ElastiCache deployment (uncomment and update):
# REDIS_URL=redis://fruitpak.abc123.cache.amazonaws.com:6379/0

# ── Application ───────────────────────────────────────────────────
# Secret key for JWT tokens (generate with: openssl rand -hex 32)
SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_SECRET_KEY

# JWT settings
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS origins (comma-separated, no spaces)
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ── Nginx Load Balancer ───────────────────────────────────────────
NGINX_PORT=80

# ── Frontend (React) ──────────────────────────────────────────────
REACT_APP_API_URL=https://api.yourdomain.com

# AWS CloudFront deployment:
# REACT_APP_API_URL=https://api.yourdomain.com
# (React app hosted on S3 + CloudFront)

# ── Twilio (SMS OTP) ──────────────────────────────────────────────
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# ── AWS Settings (for ECS deployment) ─────────────────────────────
# AWS_REGION=us-east-1
# AWS_ACCOUNT_ID=123456789012
# ECR_REPOSITORY=123456789012.dkr.ecr.us-east-1.amazonaws.com/fruitpak

# ── Monitoring & Logging ──────────────────────────────────────────
# Sentry (error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# CloudWatch (AWS)
# CLOUDWATCH_LOG_GROUP=/ecs/fruitpak
# CLOUDWATCH_LOG_STREAM=backend

# ── Feature Flags ─────────────────────────────────────────────────
# ENABLE_SIGNUP=false  # Disable public signup in production
# ENABLE_SWAGGER_DOCS=false  # Disable /docs endpoint in production
# MAX_UPLOAD_SIZE_MB=50

# ── Performance Tuning ────────────────────────────────────────────
# Database connection pool
# DB_POOL_SIZE=20
# DB_MAX_OVERFLOW=10

# Redis connection pool
# REDIS_MAX_CONNECTIONS=50

# Uvicorn workers (per container)
# WORKERS=4
